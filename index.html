<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpha Area Trading - Professional Trading Platform</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- TradingView Charting Library -->
    <script src="https://s3.tradingview.com/tv.js"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1E40AF',
                        secondary: '#3B82F6',
                        accent: '#10B981',
                        dark: '#1F2937',
                        light: '#F9FAFB'
                    },
                    fontFamily: {
                        heading: ['Fredoka One', 'cursive'],
                        body: ['Poppins', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            overflow-x: hidden;
        }
        .gradient-bg { 
            background: linear-gradient(135deg, #1E40AF, #3B82F6, #10B981);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .card-hover:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 15px 25px rgba(0,0,0,0.1); 
        }
        .pulse { 
            animation: pulse 2s infinite; 
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { box-shadow: 0 0 0 12px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }
        .stats-counter {
            font-family: 'Fredoka One', cursive;
        }
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .hero-image {
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
            border: 3px solid white;
        }
        .live-transaction {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .referral-glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { box-shadow: 0 0 10px #3B82F6; }
            to { box-shadow: 0 0 20px #3B82F6, 0 0 30px #3B82F6; }
        }
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        .dark-mode .text-dark {
            color: #e2e8f0;
        }
        .dark-mode .bg-light {
            background-color: #4a5568;
        }
        .hero-text-shimmer {
            background: linear-gradient(90deg, #1E40AF, #3B82F6, #10B981, #1E40AF);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .hero-card-float {
            animation: heroFloat 6s ease-in-out infinite;
        }
        @keyframes heroFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 16px;
            border-radius: 8px;
            color: white;
            animation: toastSlideIn 0.5s ease-out;
        }
        @keyframes toastSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .chat-bubble {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #3B82F6, #10B981);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
            z-index: 100;
        }
        .chat-bubble:hover {
            transform: scale(1.1);
        }
        .notification-bell {
            position: relative;
        }
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #EF4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .notification-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 300px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: none;
            z-index: 50;
        }
        .notification-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }
        .notification-item:hover {
            background: #f8f9fa;
        }
        .notification-item:last-child {
            border-bottom: none;
        }
        .hero-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            animation: particleFloat 4s linear infinite;
        }
        @keyframes particleFloat {
            0% { transform: translateY(100vh) scale(0); opacity: 1; }
            100% { transform: translateY(-10px) scale(1); opacity: 0; }
        }
        .trading-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .trading-card:hover {
            border-color: #3B82F6;
        }
        .profit {
            color: #10B981;
        }
        .loss {
            color: #EF4444;
        }
        .plan-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .plan-card:hover {
            border-color: #10B981;
            transform: scale(1.02);
        }
        .active-plan {
            border-color: #10B981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }
        .ai-bot-active {
            border-left: 4px solid #10B981;
        }
        .trade-success {
            background: linear-gradient(45deg, #10B981, #34D399);
            color: white;
        }
        .trade-pending {
            background: linear-gradient(45deg, #F59E0B, #FBBF24);
            color: white;
        }
        .trade-failed {
            background: linear-gradient(45deg, #EF4444, #F87171);
            color: white;
        }
        .chart-container {
            height: 500px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-light font-body text-dark min-h-screen overflow-x-hidden">

    <!-- Language Selector -->
    <div class="fixed top-32 right-4 z-50">
        <button id="languageToggle" class="bg-secondary text-white p-3 rounded-full shadow-lg hover:bg-primary transition">
            <i class="fas fa-globe"></i>
        </button>
    </div>

    <!-- Landing Page (Before Login) -->
    <div id="landingPage" class="min-h-screen flex flex-col relative overflow-hidden">
        <!-- Particle Background -->
        <div id="particles" class="absolute inset-0 pointer-events-none"></div>

        <!-- Navbar -->
        <nav class="bg-white shadow-lg sticky top-0 z-50 dark:bg-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <i class="fas fa-chart-line text-primary text-3xl mr-2 floating"></i>
                        <h1 class="text-2xl font-heading text-primary dark:text-white">Alpha Area Trading</h1>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="showLogin()" class="bg-primary text-white px-5 py-2 rounded-full hover:bg-secondary transition font-semibold text-sm">Login</button>
                        <button onclick="showSignup()" class="bg-secondary text-white px-5 py-2 rounded-full hover:bg-primary transition font-semibold text-sm">Sign Up</button>
                        <button onclick="showAdminLogin()" class="bg-accent text-white px-5 py-2 rounded-full font-semibold hover:bg-secondary transition text-sm">Admin</button>
                        <a href="https://wa.me/message/Q4BLFPHK2VU7H1" target="_blank" class="bg-green-500 text-white px-5 py-2 rounded-full font-semibold hover:bg-green-600 transition text-sm flex items-center">
                            <i class="fab fa-whatsapp mr-2"></i> Support
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Enhanced Hero Section -->
        <section class="gradient-bg flex-1 flex items-center justify-center py-12 px-4 relative">
            <div class="text-center text-white max-w-6xl w-full relative z-10">
                <!-- Trading Images -->
                <div class="flex justify-center items-center mb-8 space-x-4">
                    <img src="https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=150&h=150&fit=crop&crop=center" 
                         alt="Trading Charts" class="w-24 h-24 md:w-32 md:h-32 rounded-xl hero-image floating" style="animation-delay: 0s;">
                    <img src="https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?w=150&h=150&fit=crop&crop=center" 
                         alt="Crypto Trading" class="w-24 h-24 md:w-32 md:h-32 rounded-xl hero-image hero-card-float" style="animation-delay: 1s;">
                    <img src="https://images.unsplash.com/photo-1642790554595-bf34f7625d18?w=150&h=150&fit=crop&crop=center" 
                         alt="Forex Trading" class="w-24 h-24 md:w-32 md:h-32 rounded-xl hero-image floating" style="animation-delay: 2s;">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=150&h=150&fit=crop&crop=center" 
                         alt="Stock Trading" class="w-24 h-24 md:w-32 md:h-32 rounded-xl hero-image hero-card-float" style="animation-delay: 0.5s;">
                </div>

                <h1 class="text-4xl md:text-6xl font-heading mb-6 hero-text-shimmer">Professional Trading with AI Technology</h1>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">Join India's fastest growing trading platform. AI-powered trading, daily returns, and 24/7 support. Experience profitable trading like never before!</p>
                
                <!-- Enhanced Live Stats -->
                <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-8 max-w-5xl mx-auto">
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-users text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="liveUsers">42,158</p>
                        <p class="text-xs">Active Traders</p>
                    </div>
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-rupee-sign text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="totalDeposit">â‚¹2,45,892</p>
                        <p class="text-xs">Total Deposit</p>
                    </div>
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-money-bill-wave text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="totalWithdrawal">â‚¹1,89,456</p>
                        <p class="text-xs">Total Withdrawal</p>
                    </div>
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-trophy text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="liveWinners">3,247</p>
                        <p class="text-xs">Today's Profits</p>
                    </div>
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-robot text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="aiTrades">1,258</p>
                        <p class="text-xs">AI Trades Today</p>
                    </div>
                </div>

                <!-- Enhanced Live Transactions -->
                <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-2xl p-3 mb-6 max-w-3xl mx-auto">
                    <div class="flex items-center justify-center mb-2">
                        <i class="fas fa-bolt text-accent mr-2"></i>
                        <p class="font-bold text-sm">Live Transactions</p>
                    </div>
                    <div class="space-y-1 text-xs" id="liveTransactions">
                        <!-- Transactions will appear here -->
                    </div>
                </div>

                <button onclick="showSignup()" class="bg-white text-primary px-8 py-3 rounded-full text-lg font-bold hover:scale-105 transition transform pulse mr-4">
                    <i class="fas fa-play mr-2"></i>Start Trading & Get Bonus!
                </button>
                <button onclick="showLogin()" class="bg-secondary text-white px-8 py-3 rounded-full text-lg font-bold hover:scale-105 transition transform pulse">
                    <i class="fas fa-sign-in-alt mr-2"></i>Quick Login
                </button>

                <!-- Telegram Community Button -->
                <div class="mt-6">
                    <a href="https://t.me/+_4xwakMXjOdiMTg9" target="_blank" class="bg-blue-500 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-600 transition inline-flex items-center">
                        <i class="fab fa-telegram mr-2 text-xl"></i>Join Our Telegram Community
                    </a>
                </div>

                <!-- Enhanced Referral Banner -->
                <div class="mt-6 bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl p-4 max-w-lg mx-auto referral-glow">
                    <div class="flex items-center justify-center">
                        <i class="fas fa-gift text-accent text-xl mr-2"></i>
                        <p class="font-bold">ðŸŽ¯ Get 2% Commission on Every Direct Member's Deposit!</p>
                    </div>
                    <p class="text-sm mt-1">Invite friends & earn unlimited rewards! Track earnings in real-time.</p>
                    <div class="mt-2 text-xs opacity-80">Already 300+ users earning daily!</div>
                </div>
            </div>
        </section>

        <!-- Enhanced Features Section -->
        <section class="py-16 bg-white dark:bg-gray-800">
            <div class="max-w-7xl mx-auto px-4">
                <h2 class="text-4xl font-heading text-center mb-12 text-primary dark:text-white hero-text-shimmer">Why Choose Alpha Area Trading?</h2>
                <div class="grid md:grid-cols-4 gap-6">
                    <div class="text-center p-6 bg-light dark:bg-gray-700 rounded-2xl card-hover">
                        <i class="fas fa-robot text-5xl text-secondary mb-4 floating"></i>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white">AI-Powered Trading</h3>
                        <p class="dark:text-gray-300">Advanced algorithms for maximum profitability</p>
                    </div>
                    <div class="text-center p-6 bg-light dark:bg-gray-700 rounded-2xl card-hover">
                        <i class="fas fa-lock text-5xl text-primary mb-4 floating" style="animation-delay: 0.5s;"></i>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white">100% Secure</h3>
                        <p class="dark:text-gray-300">Bank-level encryption and security protocols</p>
                    </div>
                    <div class="text-center p-6 bg-light dark:bg-gray-700 rounded-2xl card-hover">
                        <i class="fas fa-chart-line text-5xl text-accent mb-4 floating" style="animation-delay: 1s;"></i>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white">Daily Returns</h3>
                        <p class="dark:text-gray-300">Earn daily profits with our staking plans</p>
                    </div>
                    <div class="text-center p-6 bg-light dark:bg-gray-700 rounded-2xl card-hover">
                        <i class="fas fa-headset text-5xl text-secondary mb-4 floating" style="animation-delay: 1.5s;"></i>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white">24/7 Support</h3>
                        <p class="dark:text-gray-300">Live chat & WhatsApp assistance anytime</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Start Guide Section -->
        <section class="py-16 bg-gradient-to-r from-primary to-secondary text-white">
            <div class="max-w-7xl mx-auto px-4">
                <h2 class="text-4xl font-heading text-center mb-12">ðŸš€ Get Started in 3 Easy Steps</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="text-center p-6 bg-white bg-opacity-20 rounded-2xl">
                        <div class="w-20 h-20 bg-white bg-opacity-30 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-user-plus text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-2">1. Sign Up</h3>
                        <p class="opacity-90">Create your free account in seconds.</p>
                    </div>
                    <div class="text-center p-6 bg-white bg-opacity-20 rounded-2xl">
                        <div class="w-20 h-20 bg-white bg-opacity-30 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-rupee-sign text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-2">2. Deposit</h3>
                        <p class="opacity-90">Add funds via UPI/USDT & get instant bonus.</p>
                    </div>
                    <div class="text-center p-6 bg-white bg-opacity-20 rounded-2xl">
                        <div class="w-20 h-20 bg-white bg-opacity-30 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <i class="fas fa-chart-line text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-2">3. Trade & Earn</h3>
                        <p class="opacity-90">Use AI bot or manual trading for profits!</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Customer Support Bubble -->
    <div class="chat-bubble" onclick="window.open('https://wa.me/message/Q4BLFPHK2VU7H1', '_blank')">
        <i class="fas fa-headset text-white text-xl"></i>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 w-full max-w-md transform scale-95 transition">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-heading text-primary dark:text-white">Create Account</h2>
                <button onclick="closeModals()" class="text-2xl dark:text-white">Ã—</button>
            </div>
            <form onsubmit="handleSignup(event)">
                <input type="text" id="signupName" placeholder="Full Name" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="email" id="signupEmail" placeholder="Email" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="tel" id="signupPhone" placeholder="Phone (10 digits)" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" pattern="[0-9]{10}" required>
                <input type="text" id="signupReferralCode" placeholder="Referral Code (Optional)" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white">
                <input type="password" id="signupPass" placeholder="Password" class="w-full p-4 mb-6 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <button type="submit" class="w-full bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                    Sign Up Free
                </button>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 w-full max-w-md transform scale-95 transition">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-heading text-primary dark:text-white">Welcome Back!</h2>
                <button onclick="closeModals()" class="text-2xl dark:text-white">Ã—</button>
            </div>
            <form onsubmit="handleLogin(event)">
                <input type="email" id="loginEmail" placeholder="Email" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="password" id="loginPass" placeholder="Password" class="w-full p-4 mb-6 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <button type="submit" class="w-full bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                    Login Now
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 w-full max-w-md transform scale-95 transition">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-heading text-primary dark:text-white">Admin Login</h2>
                <button onclick="closeAdminModal()" class="text-2xl dark:text-white">Ã—</button>
            </div>
            <form onsubmit="handleAdminLogin(event)">
                <input type="email" id="adminEmail" placeholder="Admin Email" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="password" id="adminPass" placeholder="Password" class="w-full p-4 mb-6 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <button type="submit" class="w-full bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                    Admin Login
                </button>
            </form>
        </div>
    </div>

    <!-- Dashboard (After Login) -->
    <div id="dashboard" class="hidden min-h-screen bg-light dark:bg-gray-900">
        <!-- Dashboard Navbar -->
        <nav class="bg-white dark:bg-gray-800 shadow-lg sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <i class="fas fa-chart-line text-primary text-3xl mr-2"></i>
                        <h1 class="text-2xl font-heading text-primary dark:text-white">Alpha Area Trading</h1>
                    </div>
                    <div class="flex items-center space-x-6">
                        <!-- Daily Login Bonus -->
                        <div class="hidden md:block">
                            <button onclick="claimDailyBonus()" class="bg-yellow-500 text-dark px-4 py-2 rounded-full font-bold hover:bg-yellow-600 transition">
                                <i class="fas fa-gift mr-1"></i> Daily Bonus
                            </button>
                        </div>
                        <div class="text-right">
                            <p class="font-bold dark:text-white" id="dashUsername">Trader123</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400" id="lastSeen">Last seen: just now</p>
                        </div>
                        <div class="relative">
                            <button onclick="toggleMenu()" class="text-3xl text-dark dark:text-white">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <div id="menuDropdown" class="absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-2xl shadow-xl hidden">
                                <a href="#" onclick="showSection('profile')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 rounded-t-2xl dark:text-white"><i class="fas fa-user mr-2"></i> Profile</a>
                                <a href="#" onclick="showSection('deposit')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-wallet mr-2"></i> Deposit</a>
                                <a href="#" onclick="showSection('withdraw')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-money-bill-wave mr-2"></i> Withdraw</a>
                                <a href="#" onclick="showSection('history')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-history mr-2"></i> History</a>
                                <a href="#" onclick="showSection('referral')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-user-plus mr-2"></i> Refer & Earn</a>
                                <a href="#" onclick="showSection('aiBot')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-robot mr-2"></i> AI Bot Trading</a>
                                <a href="#" onclick="showSection('chartAnalysis')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-chart-bar mr-2"></i> Chart Analysis</a>
                                <a href="#" onclick="showSection('staking')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-coins mr-2"></i> Staking Plans</a>
                                <a href="https://t.me/+_4xwakMXjOdiMTg9" target="_blank" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fab fa-telegram mr-2"></i> Community</a>
                                <a href="https://wa.me/message/Q4BLFPHK2VU7H1" target="_blank" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-headset mr-2"></i> Customer Support</a>
                                <a href="#" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 text-red-600 rounded-b-2xl" onclick="logout()"><i class="fas fa-sign-out-alt mr-2"></i> Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Trading Banners -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-gradient-to-r from-primary to-secondary rounded-2xl p-4 text-white text-center card-hover">
                    <p class="font-bold text-sm">AI Trading</p>
                    <p class="text-xs">Automated Profits</p>
                </div>
                <div class="bg-gradient-to-r from-green-500 to-blue-500 rounded-2xl p-4 text-white text-center card-hover">
                    <p class="font-bold text-sm">Crypto</p>
                    <p class="text-xs">BTC/ETH/USDT</p>
                </div>
                <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-4 text-white text-center card-hover">
                    <p class="font-bold text-sm">Forex</p>
                    <p class="text-xs">Currency Pairs</p>
                </div>
                <div class="bg-gradient-to-r from-yellow-500 to-red-500 rounded-2xl p-4 text-white text-center card-hover">
                    <p class="font-bold text-sm">Stocks</p>
                    <p class="text-xs">NSE/BSE</p>
                </div>
            </div>
        </div>

        <!-- User Info Card -->
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="bg-gradient-to-r from-primary to-secondary text-white p-6 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm opacity-90">Welcome to Alpha Area Trading</p>
                        <p class="text-sm mt-2">Your UID: <span id="userUID" class="font-bold">Loading...</span></p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm opacity-90">Wallet Balance</p>
                        <p class="text-4xl font-bold" id="walletBalance">â‚¹0</p>
                        <button onclick="showSection('deposit')" class="mt-2 bg-white text-primary px-6 py-2 rounded-full text-sm font-bold hover:scale-105 transition">
                            Add Money
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Trading Stats -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <h2 class="text-3xl font-heading text-center mb-6 text-primary dark:text-white">ðŸ“ˆ Live Trading Stats</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="trade-success p-4 rounded-2xl text-white">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">Successful Trades</span>
                        <span class="text-sm">Today</span>
                    </div>
                    <p class="mt-2 text-2xl">1,247</p>
                    <p class="text-sm">+â‚¹2,89,456 Profit</p>
                </div>
                <div class="trade-pending p-4 rounded-2xl text-white">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">Active Trades</span>
                        <span class="text-sm">Running</span>
                    </div>
                    <p class="mt-2 text-2xl">342</p>
                    <p class="text-sm">â‚¹1,23,789 in Progress</p>
                </div>
                <div class="trade-failed p-4 rounded-2xl text-white">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">AI Bot Accuracy</span>
                        <span class="text-sm">This Week</span>
                    </div>
                    <p class="mt-2 text-2xl">87.5%</p>
                    <p class="text-sm">142/162 Profitable</p>
                </div>
            </div>
        </div>

        <!-- Staking Plans Section -->
        <div id="stakingSection" class="max-w-7xl mx-auto px-4 pb-20">
            <h2 class="text-3xl font-heading text-center mb-8 text-primary dark:text-white">ðŸ’° Staking Plans</h2>
            <p class="text-center text-gray-600 dark:text-gray-400 mb-8">Earn daily returns with our secure staking plans</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Plan 1 -->
                <div class="plan-card bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg cursor-pointer" onclick="selectPlan(1)">
                    <div class="text-center">
                        <i class="fas fa-coins text-4xl text-yellow-500 mb-4"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">â‚¹50 - â‚¹99</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Basic Plan</p>
                        <div class="space-y-2 mb-4">
                            <p class="text-lg font-bold text-green-600">0.1% Daily</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Monthly: 3%</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Yearly: 36.5%</p>
                        </div>
                        <button class="w-full bg-primary text-white py-2 rounded-xl font-bold hover:bg-secondary transition">
                            Invest Now
                        </button>
                    </div>
                </div>
                
                <!-- Plan 2 -->
                <div class="plan-card bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg cursor-pointer" onclick="selectPlan(2)">
                    <div class="text-center">
                        <i class="fas fa-gem text-4xl text-blue-500 mb-4"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">â‚¹100 - â‚¹499</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Silver Plan</p>
                        <div class="space-y-2 mb-4">
                            <p class="text-lg font-bold text-green-600">0.2% Daily</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Monthly: 6%</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Yearly: 73%</p>
                        </div>
                        <button class="w-full bg-primary text-white py-2 rounded-xl font-bold hover:bg-secondary transition">
                            Invest Now
                        </button>
                    </div>
                </div>
                
                <!-- Plan 3 -->
                <div class="plan-card bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg cursor-pointer" onclick="selectPlan(3)">
                    <div class="text-center">
                        <i class="fas fa-crown text-4xl text-purple-500 mb-4"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">â‚¹500 - â‚¹999</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Gold Plan</p>
                        <div class="space-y-2 mb-4">
                            <p class="text-lg font-bold text-green-600">0.25% Daily</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Monthly: 7.5%</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Yearly: 91.25%</p>
                        </div>
                        <button class="w-full bg-primary text-white py-2 rounded-xl font-bold hover:bg-secondary transition">
                            Invest Now
                        </button>
                    </div>
                </div>
                
                <!-- Plan 4 -->
                <div class="plan-card bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg cursor-pointer active-plan" onclick="selectPlan(4)">
                    <div class="text-center">
                        <i class="fas fa-rocket text-4xl text-red-500 mb-4"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">â‚¹1000 - â‚¹4999</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Platinum Plan</p>
                        <div class="space-y-2 mb-4">
                            <p class="text-lg font-bold text-green-600">0.5% Daily</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Monthly: 15%</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Yearly: 182.5%</p>
                        </div>
                        <button class="w-full bg-primary text-white py-2 rounded-xl font-bold hover:bg-secondary transition">
                            Invest Now
                        </button>
                    </div>
                </div>
                
                <!-- Plan 5 -->
                <div class="plan-card bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg cursor-pointer" onclick="selectPlan(5)">
                    <div class="text-center">
                        <i class="fas fa-star text-4xl text-yellow-500 mb-4"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">â‚¹5000+</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">VIP Plan</p>
                        <div class="space-y-2 mb-4">
                            <p class="text-lg font-bold text-green-600">1% Daily</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Monthly: 30%</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Yearly: 365%</p>
                        </div>
                        <button class="w-full bg-primary text-white py-2 rounded-xl font-bold hover:bg-secondary transition">
                            Invest Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Active Investments -->
            <div class="mt-12">
                <h2 class="text-3xl font-heading text-center mb-6 text-primary dark:text-white">ðŸ“Š Your Active Investments</h2>
                <div id="activeInvestments" class="space-y-4">
                    <!-- Active investments will be loaded here -->
                    <p class="text-center text-gray-500 dark:text-gray-400">No active investments yet. Choose a plan to start earning!</p>
                </div>
            </div>
        </div>

        <!-- AI Bot Trading Section -->
        <div id="aiBotSection" class="hidden max-w-6xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">ðŸ¤– AI Bot Trading</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="col-span-2">
                        <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Trading View</h3>
                            <div id="tradingview-widget" class="chart-container">
                                <!-- TradingView widget will be loaded here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">AI Bot Controls</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium dark:text-gray-300 mb-2">Risk Level</label>
                                    <input type="range" min="1" max="10" value="5" class="w-full" id="riskLevel">
                                    <div class="flex justify-between text-xs text-gray-600 dark:text-gray-400">
                                        <span>Low Risk</span>
                                        <span>High Risk</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium dark:text-gray-300 mb-2">Investment Amount</label>
                                    <input type="number" id="aiInvestment" placeholder="Enter amount" class="w-full p-3 border rounded-xl dark:bg-gray-600 dark:text-white" min="10">
                                </div>
                                
                                <div class="grid grid-cols-2 gap-2">
                                    <button onclick="startAITrading()" class="bg-green-500 text-white py-3 rounded-xl font-bold hover:bg-green-600 transition">
                                        Start AI Bot
                                    </button>
                                    <button onclick="stopAITrading()" class="bg-red-500 text-white py-3 rounded-xl font-bold hover:bg-red-600 transition">
                                        Stop AI Bot
                                    </button>
                                </div>
                                
                                <div class="bg-primary text-white p-4 rounded-xl">
                                    <p class="text-sm">AI Bot Status: <span id="aiBotStatus" class="font-bold">Inactive</span></p>
                                    <p class="text-sm mt-2">Current Profit: <span id="aiCurrentProfit" class="font-bold">â‚¹0</span></p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Recent AI Trades</h3>
                            <div id="aiTradeHistory" class="space-y-3 max-h-60 overflow-y-auto">
                                <!-- AI trade history will be loaded here -->
                                <p class="text-center text-gray-500 dark:text-gray-400">No AI trades yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart Analysis Section -->
        <div id="chartAnalysisSection" class="hidden max-w-6xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">ðŸ“Š Chart Analysis</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl mb-6">
                    <div class="flex flex-wrap gap-2 mb-4">
                        <button onclick="loadChart('BTCUSDT')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition">BTC/USDT</button>
                        <button onclick="loadChart('ETHUSDT')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition">ETH/USDT</button>
                        <button onclick="loadChart('BNBUSDT')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition">BNB/USDT</button>
                        <button onclick="loadChart('ADAUSDT')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition">ADA/USDT</button>
                        <button onclick="loadChart('DOTUSDT')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition">DOT/USDT</button>
                    </div>
                    <div id="advanced-chart" class="chart-container">
                        <!-- Advanced chart will be loaded here -->
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Trading Signals</h3>
                        <div id="tradingSignals" class="space-y-3">
                            <!-- Trading signals will be loaded here -->
                            <div class="p-3 bg-green-100 dark:bg-green-900 rounded-lg">
                                <p class="font-bold text-green-800 dark:text-green-200">BTC/USDT: BUY</p>
                                <p class="text-sm text-green-700 dark:text-green-300">Strong bullish momentum detected</p>
                            </div>
                            <div class="p-3 bg-red-100 dark:bg-red-900 rounded-lg">
                                <p class="font-bold text-red-800 dark:text-red-200">ETH/USDT: SELL</p>
                                <p class="text-sm text-red-700 dark:text-red-300">Resistance level approaching</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Market Overview</h3>
                        <div id="marketOverview" class="space-y-3">
                            <!-- Market overview will be loaded here -->
                            <div class="flex justify-between items-center p-3 bg-white dark:bg-gray-600 rounded-lg">
                                <div>
                                    <p class="font-bold dark:text-white">BTC/USDT</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Bitcoin</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold dark:text-white">$42,156.32</p>
                                    <p class="text-sm text-green-600">+2.34%</p>
                                </div>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-white dark:bg-gray-600 rounded-lg">
                                <div>
                                    <p class="font-bold dark:text-white">ETH/USDT</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Ethereum</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold dark:text-white">$2,856.41</p>
                                    <p class="text-sm text-red-600">-1.23%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profileSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">Your Profile</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                <div class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Personal Info</h3>
                            <div class="space-y-3 dark:text-gray-300">
                                <p><strong>Name:</strong> <span id="profileName">-</span></p>
                                <p><strong>Email:</strong> <span id="profileEmail">-</span></p>
                                <p><strong>Phone:</strong> <span id="profilePhone">-</span></p>
                                <p><strong>Username:</strong> <span id="profileUsername">-</span></p>
                                <p><strong>UID:</strong> <span id="profileUID">-</span></p>
                                <p><strong>Joined Date:</strong> <span id="profileJoinDate">-</span></p>
                                <p><strong>Last Seen:</strong> <span id="profileLastSeen">-</span></p>
                            </div>
                            <button onclick="updateProfile()" class="mt-4 bg-primary text-white px-4 py-2 rounded-xl font-bold hover:bg-secondary transition">
                                Update Profile
                            </button>
                        </div>
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Account Stats</h3>
                            <div class="space-y-3 dark:text-gray-300">
                                <p><strong>Wallet Balance:</strong> â‚¹<span id="profileBalance">0</span></p>
                                <p><strong>Total Investments:</strong> <span id="profileInvestments">0</span></p>
                                <p><strong>Total Profits:</strong> â‚¹<span id="profileProfits">0</span></p>
                                <p><strong>Total Withdrawals:</strong> â‚¹<span id="profileWithdrawals">0</span></p>
                                <p><strong>AI Trades:</strong> <span id="profileAITrades">0</span></p>
                                <p><strong>Referral Earnings:</strong> â‚¹<span id="profileReferralEarnings">0</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <div id="historySection" class="hidden max-w-6xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">Your History</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                <div class="space-y-6">
                    <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Recent Transactions</h3>
                        <div id="transactionHistory" class="space-y-3">
                            <p class="text-center text-gray-500 dark:text-gray-400">No transactions yet</p>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Investment History</h3>
                            <div id="investmentHistory" class="space-y-3">
                                <p class="text-center text-gray-500 dark:text-gray-400">No investments yet</p>
                            </div>
                        </div>
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Withdrawal History</h3>
                            <div id="withdrawalHistory" class="space-y-3">
                                <p class="text-center text-gray-500 dark:text-gray-400">No withdrawals yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Referral Section -->
        <div id="referralSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">Refer & Earn</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <div class="bg-gradient-to-br from-primary to-secondary text-white p-6 rounded-2xl">
                        <h3 class="text-xl font-bold mb-4">ðŸŽ¯ Your Referral Stats</h3>
                        <div class="space-y-3">
                            <p><strong>Referral Code:</strong> <span id="referralCode" class="bg-white bg-opacity-20 px-2 py-1 rounded">Loading...</span></p>
                            <p><strong>Total Referrals:</strong> <span id="totalReferrals">0</span></p>
                            <p><strong>Referral Earnings:</strong> â‚¹<span id="referralEarnings">0</span></p>
                        </div>
                    </div>
                    
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">ðŸ’° How it Works</h3>
                        <div class="space-y-3 text-sm dark:text-gray-300">
                            <p>âœ… <strong>2% Commission</strong> on every direct member's deposit</p>
                            <p>âœ… Share your unique referral code</p>
                            <p>âœ… Earn when your friends deposit money</p>
                            <p>âœ… Withdraw referral earnings anytime</p>
                        </div>
                    </div>
                </div>

                <div class="bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded-2xl p-6 mb-6">
                    <h3 class="text-xl font-bold text-primary dark:text-white mb-4">ðŸ“¤ Your Referral Code</h3>
                    <div class="text-center mb-4">
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-xl border-2 border-primary inline-block">
                            <p class="text-3xl font-bold text-primary dark:text-white" id="referralCodeDisplay">Loading...</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Share this code with friends</p>
                        </div>
                    </div>
                    <div class="text-center">
                        <button onclick="copyReferralCode()" class="bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-secondary transition">
                            <i class="fas fa-copy mr-2"></i>Copy Referral Code
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 text-center mt-3">Share this code with friends! When they sign up using your code, you get 2% commission on their deposits!</p>
                </div>

                <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold text-primary dark:text-white mb-4">ðŸ‘¥ Your Referrals & Commission History</h3>
                    <div id="referralList" class="space-y-3">
                        <p class="text-center text-gray-500 dark:text-gray-400">No referrals yet. Share your code to start earning!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- DEPOSIT SECTION -->
        <div id="depositSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white text-center">Deposit Money</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <!-- INR Deposit -->
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">INR Deposit</h3>
                        <div class="mb-4 p-4 bg-yellow-50 dark:bg-yellow-900 rounded-xl border border-yellow-200 dark:border-yellow-700">
                            <p class="text-center font-bold text-lg dark:text-white">Send payment to: <span class="text-primary" id="currentUPI">millnerkaptan01@fam</span></p>
                            <p class="text-center text-sm mt-2 dark:text-gray-300">After payment, send screenshot to confirm</p>
                            <div class="flex justify-center space-x-2 mt-3">
                                <button onclick="copyUPI()" class="bg-blue-500 text-white px-4 py-2 rounded-full text-sm font-bold hover:bg-blue-600 transition">
                                    <i class="fas fa-copy mr-1"></i>Copy UPI
                                </button>
                            </div>
                        </div>
                        <input type="number" id="depositAmountINR" placeholder="Enter Amount (min â‚¹100)" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white" min="100">
                        <button onclick="sendINRDepositToWhatsApp()" class="w-full bg-green-500 text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                            Send Request on WhatsApp
                        </button>
                    </div>
                    
                    <!-- USDT Deposit -->
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">USDT Deposit</h3>
                        <div class="mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-xl border border-blue-200 dark:border-blue-700">
                            <p class="text-center font-bold text-lg dark:text-white">Send USDT to:</p>
                            <p class="text-center text-sm mt-2 dark:text-gray-300 font-mono">BSC BNB Smart Chain (Bep 20)</p>
                            <p class="text-center text-sm mt-1 dark:text-gray-300 font-mono">0x8e57d705f1b58ceda77c91df6ac80aac5c2a83df</p>
                            <p class="text-center text-sm mt-2 dark:text-gray-300">OR</p>
                            <p class="text-center text-sm mt-1 dark:text-gray-300 font-mono">TRC 20: TN9DDuzXnXirgAAS4mRe8VFQ6VxuVUQmJc</p>
                            <p class="text-center text-xs mt-2 dark:text-gray-300 text-red-500">Minimum 10 USDT, otherwise deposit not received</p>
                            <div class="flex justify-center space-x-2 mt-3">
                                <button onclick="copyUSDTAddress('bsc')" class="bg-blue-500 text-white px-4 py-2 rounded-full text-sm font-bold hover:bg-blue-600 transition">
                                    <i class="fas fa-copy mr-1"></i>Copy BSC
                                </button>
                                <button onclick="copyUSDTAddress('trc')" class="bg-purple-500 text-white px-4 py-2 rounded-full text-sm font-bold hover:bg-purple-600 transition">
                                    <i class="fas fa-copy mr-1"></i>Copy TRC
                                </button>
                            </div>
                        </div>
                        <input type="number" id="depositAmountUSDT" placeholder="Enter Amount (min 10 USDT)" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white" min="10">
                        <button onclick="sendUSDTDepositToWhatsApp()" class="w-full bg-purple-500 text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                            Send Screenshot on WhatsApp
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- WITHDRAW SECTION -->
        <div id="withdrawSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white text-center">Withdraw Money</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- INR Withdrawal -->
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">INR Withdrawal</h3>
                        <input type="number" id="withdrawAmountINR" placeholder="Enter Amount (min â‚¹100)" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white" min="100">
                        <input type="text" id="bankName" placeholder="Bank Name" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white">
                        <input type="text" id="accHolderName" placeholder="Account Holder Name" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white">
                        <input type="text" id="accNumber" placeholder="Account Number" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white">
                        <input type="text" id="ifsc" placeholder="IFSC Code" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white">
                        <button onclick="sendINRWithdrawToWhatsApp()" class="w-full bg-red-500 text-white py-4 rounded-xl font-bold hover:opacity-90 transition">
                            Submit Request on WhatsApp
                        </button>
                    </div>
                    
                    <!-- USDT Withdrawal -->
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">USDT Withdrawal</h3>
                        <input type="number" id="withdrawAmountUSDT" placeholder="Enter Amount (min 10 USDT)" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white" min="10">
                        <input type="text" id="usdtAddress" placeholder="USDT Address" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white">
                        <select id="usdtNetwork" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-600 dark:text-white">
                            <option value="bsc">BSC (BEP-20)</option>
                            <option value="trc">TRC-20</option>
                            <option value="erc">ERC-20</option>
                        </select>
                        <button onclick="sendUSDTWithdrawToWhatsApp()" class="w-full bg-purple-500 text-white py-4 rounded-xl font-bold hover:opacity-90 transition">
                            Submit Request on WhatsApp
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminSection" class="hidden max-w-6xl mx-auto px-4 py-16">
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white text-center">Admin Panel</h2>
                    <button onclick="showSection('staking')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                <div class="mb-6 p-4 bg-light dark:bg-gray-700 rounded-xl text-center">
                    <p class="text-xl font-bold dark:text-white">Total Registered Users: <span id="totalUsers">0</span></p>
                </div>
                
                <!-- User Stats Update Section -->
                <div class="mb-6 bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Update User Stats</h3>
                    <div class="grid md:grid-cols-4 gap-4 mb-4">
                        <input type="email" id="adminUserEmailStats" placeholder="User Email" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserWinnings" placeholder="Total Winnings" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserWithdrawals" placeholder="Total Withdrawals" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="updateUserStats()" class="bg-purple-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-purple-600 transition">
                            Update Stats
                        </button>
                    </div>
                </div>

                <!-- Referral Stats Update Section -->
                <div class="mb-6 bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Update Referral Stats</h3>
                    <div class="grid md:grid-cols-4 gap-4 mb-4">
                        <input type="email" id="adminUserEmailReferral" placeholder="User Email" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserReferrals" placeholder="Total Referrals" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserReferralEarnings" placeholder="Referral Earnings" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="updateReferralStats()" class="bg-blue-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-blue-600 transition">
                            Update Referral
                        </button>
                    </div>
                </div>

                <!-- Manual Referral Commission Add/Deduct Section -->
                <div class="mb-6 bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Manual Referral Commission</h3>
                    <div class="grid md:grid-cols-4 gap-4 mb-4">
                        <input type="email" id="adminReferralUserEmail" placeholder="User Email" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminReferralAmount" placeholder="Amount (Positive=Add, Negative=Deduct)" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="text" id="adminReferralReason" placeholder="Reason (e.g., Manual Add)" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="manualReferralCommission()" class="bg-green-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-green-600 transition">
                            Apply Commission
                        </button>
                    </div>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Add Funds to User</h3>
                    <div class="flex gap-4 mb-4">
                        <input type="email" id="adminUserEmail" placeholder="User Email" class="flex-1 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminFundAmount" placeholder="Amount" class="w-32 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="addFundToUser()" class="bg-green-500 text-white px-6 py-3 rounded-xl font-bold">Add Funds</button>
                    </div>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Deduct Funds from User</h3>
                    <div class="flex gap-4 mb-4">
                        <input type="email" id="adminUserEmailDeduct" placeholder="User Email" class="flex-1 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminDeductAmount" placeholder="Amount" class="w-32 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="deductFundFromUser()" class="bg-red-500 text-white px-6 py-3 rounded-xl font-bold">Deduct Funds</button>
                    </div>
                </div>
                
                <!-- AI Bot Control Section -->
                <div class="mb-6 bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">AI Bot Control</h3>
                    <div class="grid md:grid-cols-3 gap-4 mb-4">
                        <input type="email" id="adminAIUserEmail" placeholder="User Email" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminAIProfit" placeholder="Profit Amount" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="addAIProfit()" class="bg-green-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-green-600 transition">
                            Add AI Profit
                        </button>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4">
                        <button onclick="startAllAIBots()" class="bg-blue-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-blue-600 transition">
                            Start All AI Bots
                        </button>
                        <button onclick="stopAllAIBots()" class="bg-red-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-red-600 transition">
                            Stop All AI Bots
                        </button>
                    </div>
                </div>
                
                <div id="adminUserList" class="space-y-4 max-h-96 overflow-y-auto"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">Â© 2025 Alpha Area Trading. All rights reserved.</p>
            <p class="text-sm">Trade responsibly. 18+ only.</p>
            <div class="mt-4 flex justify-center space-x-4">
                <a href="https://wa.me/message/Q4BLFPHK2VU7H1" target="_blank" class="text-green-400 hover:text-green-300">
                    <i class="fab fa-whatsapp text-xl"></i> Support
                </a>
                <a href="https://t.me/+_4xwakMXjOdiMTg9" target="_blank" class="text-blue-400 hover:text-blue-300">
                    <i class="fab fa-telegram text-xl"></i> Telegram
                </a>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Cloud Database Configuration
        const JSONBIN_API_KEY = '$2a$10$e50.WfbjPMQ1HVr7CWQzVO673PQR9xTlX5OueFLvimwSsT5qVbUgG';
        const JSONBIN_BIN_ID = '6909b47fae596e708f43562d';
        
        let currentUser = null;
        let users = [];
        let isAdmin = false;
        let isDarkMode = false;
        let currentLanguage = 'english';
        let activeAIBots = [];
        let stakingIntervals = {};

        // Live Stats Data - Enhanced with Trading Transactions
        const transactions = [
            "Mohan withdrew $77",
            "Raj deposited â‚¹5000",
            "Priya earned â‚¹1200 from AI trading",
            "Amit invested in Platinum plan",
            "Sneha received â‚¹250 referral bonus",
            "Vikash claimed daily bonus â‚¹5",
            "Neha's AI bot made â‚¹1800 profit",
            "Rohan staked â‚¹10000 in VIP plan",
            "Pooja withdrew â‚¹4500",
            "Karan's trade yielded â‚¹3200 profit",
            "Sonia deposited â‚¹7500",
            "Arjun received â‚¹150 staking returns",
            "Meera referred friend +â‚¹100",
            "Vikram's AI bot accuracy 92%",
            "Priyanka invested in Gold plan"
        ];

        // Multi-language support
        const translations = {
            english: {
                welcome: "Welcome back,",
                walletBalance: "Wallet Balance",
                playNow: "Start Trading & Get Bonus!",
                joinTelegram: "Join Our Telegram Community",
                referralBonus: "Get 2% Commission on Every Direct Member's Deposit!"
            },
            hindi: {
                welcome: "à¤µà¤¾à¤ªà¤¸à¥€ à¤ªà¤° à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ,",
                walletBalance: "à¤µà¥‰à¤²à¥‡à¤Ÿ à¤¬à¥ˆà¤²à¥‡à¤‚à¤¸",
                playNow: "à¤…à¤­à¥€ à¤Ÿà¥à¤°à¥‡à¤¡à¤¿à¤‚à¤— à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤¬à¥‹à¤¨à¤¸ à¤ªà¤¾à¤à¤‚!",
                joinTelegram: "à¤¹à¤®à¤¾à¤°à¥‡ à¤Ÿà¥‡à¤²à¥€à¤—à¥à¤°à¤¾à¤® à¤¸à¤®à¥à¤¦à¤¾à¤¯ à¤®à¥‡à¤‚ à¤¶à¤¾à¤®à¤¿à¤² à¤¹à¥‹à¤‚",
                referralBonus: "à¤¹à¤° à¤¸à¥€à¤§à¥‡ à¤¸à¤¦à¤¸à¥à¤¯ à¤•à¥‡ à¤¡à¤¿à¤ªà¥‰à¤œà¤¿à¤Ÿ à¤ªà¤° 2% à¤•à¤®à¥€à¤¶à¤¨ à¤ªà¤¾à¤à¤‚!"
            }
        };

        // Initialize Live Stats - Enhanced
        function initializeLiveStats() {
            // Update main stats every 3 seconds
            setInterval(() => {
                document.getElementById('liveUsers').textContent = 
                    (Math.floor(Math.random() * 20000) + 30000).toLocaleString();
                document.getElementById('totalDeposit').textContent = 
                    'â‚¹' + (Math.floor(Math.random() * 50000) + 200000).toLocaleString();
                document.getElementById('totalWithdrawal').textContent = 
                    'â‚¹' + (Math.floor(Math.random() * 40000) + 150000).toLocaleString();
                document.getElementById('liveWinners').textContent = 
                    (Math.floor(Math.random() * 1000) + 2500).toLocaleString();
                document.getElementById('aiTrades').textContent = 
                    (Math.floor(Math.random() * 500) + 1000).toLocaleString();
            }, 3000);

            // Update live transactions every 5 seconds
            setInterval(updateLiveTransactions, 5000);
            updateLiveTransactions();
        }

        function updateLiveTransactions() {
            const container = document.getElementById('liveTransactions');
            const shuffled = [...transactions].sort(() => 0.5 - Math.random()).slice(0, 5);
            
            container.innerHTML = shuffled.map(transaction => 
                `<div class="flex items-center justify-between py-1 border-b border-white border-opacity-20 live-transaction">
                    <span class="text-xs">${transaction}</span>
                    <span class="text-accent font-bold text-xs">Just now</span>
                </div>`
            ).join('');
        }

        // New Feature: Particle Animation for Hero
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'hero-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 4 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Language Toggle
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'english' ? 'hindi' : 'english';
            updateLanguage();
            localStorage.setItem('language', currentLanguage);
        }

        function updateLanguage() {
            const trans = translations[currentLanguage];
            // Update key elements
            if (document.querySelector('#welcomeUser ~ p')) document.querySelector('#welcomeUser ~ p').textContent = trans.welcome;
            // More updates as needed
        }

        // UPI Functions
        function copyUPI() {
            const upi = document.getElementById('currentUPI').textContent;
            navigator.clipboard.writeText(upi).then(() => {
                alert('UPI copied to clipboard!');
            });
        }

        // USDT Address Functions
        function copyUSDTAddress(network) {
            let address = '';
            if (network === 'bsc') {
                address = '0x8e57d705f1b58ceda77c91df6ac80aac5c2a83df';
            } else if (network === 'trc') {
                address = 'TN9DDuzXnXirgAAS4mRe8VFQ6VxuVUQmJc';
            }
            navigator.clipboard.writeText(address).then(() => {
                alert(`${network.toUpperCase()} address copied to clipboard!`);
            });
        }

        // Staking Plan Functions
        function selectPlan(planId) {
            // Remove active class from all plans
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.remove('active-plan');
            });
            
            // Add active class to selected plan
            event.currentTarget.classList.add('active-plan');
            
            // Show investment modal or proceed directly
            const planAmounts = {
                1: {min: 50, max: 99},
                2: {min: 100, max: 499},
                3: {min: 500, max: 999},
                4: {min: 1000, max: 4999},
                5: {min: 5000, max: 1000000}
            };
            
            const plan = planAmounts[planId];
            const amount = prompt(`Enter investment amount (â‚¹${plan.min} - â‚¹${plan.max}):`);
            
            if (amount && !isNaN(amount) && amount >= plan.min && amount <= plan.max) {
                investInPlan(planId, parseFloat(amount));
            } else if (amount) {
                alert(`Please enter a valid amount between â‚¹${plan.min} and â‚¹${plan.max}`);
            }
        }

        function investInPlan(planId, amount) {
            if (!currentUser) {
                showLogin();
                return;
            }
            
            if (currentUser.balance < amount) {
                alert('Insufficient balance! Please deposit first.');
                showSection('deposit');
                return;
            }
            
            // Deduct amount from balance
            currentUser.balance -= amount;
            
            // Add to user's investments
            if (!currentUser.investments) currentUser.investments = [];
            const investment = {
                id: Date.now(),
                planId: planId,
                amount: amount,
                date: new Date().toLocaleString(),
                dailyReturn: calculateDailyReturn(planId, amount),
                totalReturns: 0,
                active: true
            };
            
            currentUser.investments.push(investment);
            
            // Add transaction record
            if (!currentUser.transactionHistory) currentUser.transactionHistory = [];
            currentUser.transactionHistory.unshift({
                type: 'Investment',
                amount: amount,
                date: new Date().toLocaleString(),
                note: `Plan ${planId} investment`
            });
            
            // Start staking interval for this investment
            startStakingInterval(investment.id);
            
            updateBalance();
            saveUsersToCloud();
            
            alert(`Successfully invested â‚¹${amount} in plan ${planId}! Daily returns will be added automatically.`);
            loadActiveInvestments();
        }

        function calculateDailyReturn(planId, amount) {
            const rates = {
                1: 0.001, // 0.1%
                2: 0.002, // 0.2%
                3: 0.0025, // 0.25%
                4: 0.005, // 0.5%
                5: 0.01 // 1%
            };
            
            return amount * rates[planId];
        }

        function startStakingInterval(investmentId) {
            // Add daily returns every 24 hours (for demo, we'll use 1 minute)
            stakingIntervals[investmentId] = setInterval(() => {
                if (currentUser && currentUser.investments) {
                    const investment = currentUser.investments.find(inv => inv.id === investmentId);
                    if (investment && investment.active) {
                        const dailyReturn = investment.dailyReturn;
                        currentUser.balance += dailyReturn;
                        investment.totalReturns += dailyReturn;
                        
                        // Add transaction record
                        if (!currentUser.transactionHistory) currentUser.transactionHistory = [];
                        currentUser.transactionHistory.unshift({
                            type: 'Staking Return',
                            amount: dailyReturn,
                            date: new Date().toLocaleString(),
                            note: `Daily return from investment #${investmentId}`
                        });
                        
                        updateBalance();
                        saveUsersToCloud();
                        loadActiveInvestments();
                    }
                }
            }, 60000); // 1 minute for demo (should be 24*60*60*1000 for real)
        }

        function loadActiveInvestments() {
            const container = document.getElementById('activeInvestments');
            if (currentUser && currentUser.investments && currentUser.investments.length > 0) {
                const activeInvestments = currentUser.investments.filter(inv => inv.active);
                
                if (activeInvestments.length > 0) {
                    container.innerHTML = activeInvestments.map(inv => {
                        const planNames = {
                            1: 'Basic Plan (0.1% daily)',
                            2: 'Silver Plan (0.2% daily)',
                            3: 'Gold Plan (0.25% daily)',
                            4: 'Platinum Plan (0.5% daily)',
                            5: 'VIP Plan (1% daily)'
                        };
                        
                        return `
                            <div class="p-4 bg-white dark:bg-gray-700 rounded-2xl border border-green-200 dark:border-green-800">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="font-bold dark:text-white">${planNames[inv.planId]}</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">Invested: â‚¹${inv.amount} | Started: ${inv.date}</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-green-600 font-bold">+â‚¹${inv.dailyReturn.toFixed(2)}/day</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">Total: â‚¹${inv.totalReturns.toFixed(2)}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                } else {
                    container.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No active investments yet. Choose a plan to start earning!</p>';
                }
            } else {
                container.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No active investments yet. Choose a plan to start earning!</p>';
            }
        }

        // AI Bot Trading Functions
        function startAITrading() {
            if (!currentUser) {
                showLogin();
                return;
            }
            
            const investment = document.getElementById('aiInvestment').value;
            if (!investment || investment < 10) {
                alert('Please enter a valid investment amount (min â‚¹10)');
                return;
            }
            
            if (currentUser.balance < investment) {
                alert('Insufficient balance! Please deposit first.');
                showSection('deposit');
                return;
            }
            
            // Deduct investment amount
            currentUser.balance -= parseFloat(investment);
            
            // Add to AI trading
            if (!currentUser.aiTrading) currentUser.aiTrading = {};
            currentUser.aiTrading.active = true;
            currentUser.aiTrading.investment = parseFloat(investment);
            currentUser.aiTrading.startTime = new Date().toLocaleString();
            currentUser.aiTrading.profit = 0;
            currentUser.aiTrading.riskLevel = document.getElementById('riskLevel').value;
            
            // Add to active AI bots
            activeAIBots.push(currentUser.email);
            
            // Add transaction record
            if (!currentUser.transactionHistory) currentUser.transactionHistory = [];
            currentUser.transactionHistory.unshift({
                type: 'AI Trading Investment',
                amount: parseFloat(investment),
                date: new Date().toLocaleString(),
                note: `AI trading with risk level ${currentUser.aiTrading.riskLevel}`
            });
            
            updateBalance();
            saveUsersToCloud();
            
            document.getElementById('aiBotStatus').textContent = 'Active';
            document.getElementById('aiBotStatus').className = 'font-bold text-green-600';
            
            alert('AI Trading started successfully! Profits will be added automatically.');
            loadAITradeHistory();
        }

        function stopAITrading() {
            if (!currentUser || !currentUser.aiTrading || !currentUser.aiTrading.active) {
                alert('No active AI trading session found.');
                return;
            }
            
            // Remove from active AI bots
            activeAIBots = activeAIBots.filter(email => email !== currentUser.email);
            
            // Update user record
            currentUser.aiTrading.active = false;
            currentUser.aiTrading.endTime = new Date().toLocaleString();
            
            // Add final profit to balance
            if (currentUser.aiTrading.profit > 0) {
                currentUser.balance += currentUser.aiTrading.profit;
                
                // Add transaction record
                if (!currentUser.transactionHistory) currentUser.transactionHistory = [];
                currentUser.transactionHistory.unshift({
                    type: 'AI Trading Profit',
                    amount: currentUser.aiTrading.profit,
                    date: new Date().toLocaleString(),
                    note: `Final profit from AI trading session`
                });
            }
            
            updateBalance();
            saveUsersToCloud();
            
            document.getElementById('aiBotStatus').textContent = 'Inactive';
            document.getElementById('aiBotStatus').className = 'font-bold text-red-600';
            document.getElementById('aiCurrentProfit').textContent = 'â‚¹0';
            
            alert('AI Trading stopped successfully!');
            loadAITradeHistory();
        }

        function loadAITradeHistory() {
            const container = document.getElementById('aiTradeHistory');
            if (currentUser && currentUser.aiTrading) {
                // For demo, we'll create some sample trades
                const sampleTrades = [
                    { pair: 'BTC/USDT', action: 'BUY', amount: '0.005', profit: '+â‚¹1250', time: '2 hours ago' },
                    { pair: 'ETH/USDT', action: 'SELL', amount: '0.5', profit: '+â‚¹850', time: '4 hours ago' },
                    { pair: 'BNB/USDT', action: 'BUY', amount: '2', profit: '+â‚¹320', time: '6 hours ago' }
                ];
                
                container.innerHTML = sampleTrades.map(trade => `
                    <div class="p-3 bg-white dark:bg-gray-600 rounded-lg border">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-bold dark:text-white">${trade.pair} - ${trade.action}</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Amount: ${trade.amount}</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-green-600">${trade.profit}</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">${trade.time}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No AI trades yet</p>';
            }
        }

        // Chart Analysis Functions
        function loadChart(symbol) {
            // Remove existing chart
            const container = document.getElementById('advanced-chart');
            container.innerHTML = '';
            
            // Create new TradingView widget
            new TradingView.widget({
                "width": "100%",
                "height": "500",
                "symbol": `BINANCE:${symbol}`,
                "interval": "D",
                "timezone": "Etc/UTC",
                "theme": isDarkMode ? "dark" : "light",
                "style": "1",
                "locale": "in",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "allow_symbol_change": true,
                "container_id": "advanced-chart",
                "studies": [
                    "RSI@tv-basicstudies",
                    "StochasticRSI@tv-basicstudies",
                    "MASimple@tv-basicstudies"
                ],
                "show_popup_button": true,
                "popup_width": "1000",
                "popup_height": "650"
            });
        }

        // Admin AI Control Functions
        function addAIProfit() {
            const email = document.getElementById('adminAIUserEmail').value.trim().toLowerCase();
            const profit = parseFloat(document.getElementById('adminAIProfit').value);
            
            if (!email || isNaN(profit)) {
                alert('Please enter valid email and profit amount');
                return;
            }
            
            const user = users.find(u => u.email === email);
            if (!user) {
                alert('User not found!');
                return;
            }
            
            if (!user.aiTrading) user.aiTrading = {};
            user.aiTrading.profit = (user.aiTrading.profit || 0) + profit;
            user.balance += profit;
            
            // Add transaction record
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'AI Trading Profit (Admin)',
                amount: profit,
                date: new Date().toLocaleString(),
                note: `Admin added profit`
            });
            
            saveUsersToCloud();
            alert(`Added â‚¹${profit} AI profit to ${user.username}`);
            
            // Clear fields
            document.getElementById('adminAIUserEmail').value = '';
            document.getElementById('adminAIProfit').value = '';
        }

        function startAllAIBots() {
            users.forEach(user => {
                if (user.balance >= 10 && (!user.aiTrading || !user.aiTrading.active)) {
                    if (!user.aiTrading) user.aiTrading = {};
                    user.aiTrading.active = true;
                    user.aiTrading.startTime = new Date().toLocaleString();
                    user.aiTrading.profit = 0;
                    user.aiTrading.riskLevel = 5;
                    
                    activeAIBots.push(user.email);
                    
                    // Add transaction record
                    if (!user.transactionHistory) user.transactionHistory = [];
                    user.transactionHistory.unshift({
                        type: 'AI Trading Started (Admin)',
                        amount: 0,
                        date: new Date().toLocaleString(),
                        note: `Admin started AI trading`
                    });
                }
            });
            
            saveUsersToCloud();
            alert('Started AI trading for all eligible users');
        }

        function stopAllAIBots() {
            users.forEach(user => {
                if (user.aiTrading && user.aiTrading.active) {
                    user.aiTrading.active = false;
                    user.aiTrading.endTime = new Date().toLocaleString();
                    
                    // Add final profit to balance
                    if (user.aiTrading.profit > 0) {
                        user.balance += user.aiTrading.profit;
                        
                        // Add transaction record
                        if (!user.transactionHistory) user.transactionHistory = [];
                        user.transactionHistory.unshift({
                            type: 'AI Trading Profit (Admin)',
                            amount: user.aiTrading.profit,
                            date: new Date().toLocaleString(),
                            note: `Final profit from AI trading (Admin stopped)`
                        });
                    }
                    
                    activeAIBots = activeAIBots.filter(email => email !== user.email);
                }
            });
            
            saveUsersToCloud();
            alert('Stopped AI trading for all users');
        }

        // FIXED REFERRAL SYSTEM - Only Code, No Link
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function loadReferralSection() {
            if (!currentUser) return;
            
            // Generate referral code if not exists
            if (!currentUser.referralCode) {
                currentUser.referralCode = generateReferralCode();
                saveUsersToCloud();
            }

            // Update referral UI - Only code, no link
            document.getElementById('referralCode').textContent = currentUser.referralCode;
            document.getElementById('referralCodeDisplay').textContent = currentUser.referralCode;
            
            // Referral stats
            const referrals = users.filter(u => u.referredBy === currentUser.referralCode);
            const referralEarnings = currentUser.referralEarnings || 0;

            document.getElementById('totalReferrals').textContent = referrals.length;
            document.getElementById('referralEarnings').textContent = referralEarnings;

            // Group commissions
            let referralTotals = {};
            let commissionByUser = {};

            (currentUser.commissionHistory || []).forEach(comm => {
                if (!referralTotals[comm.from]) referralTotals[comm.from] = 0;
                referralTotals[comm.from] += comm.amount;

                if (!commissionByUser[comm.from]) commissionByUser[comm.from] = [];
                commissionByUser[comm.from].push(comm);
            });

            // Update referral list with commission details
            const referralList = document.getElementById('referralList');
            if (referrals.length > 0) {
                referralList.innerHTML = referrals.map(ref => {
                    const totalCommission = referralTotals[ref.username] || 0;
                    const userHistory = commissionByUser[ref.username] || [];
                    return `
                        <div class="p-4 bg-white dark:bg-gray-600 rounded-lg border">
                            <div class="flex justify-between items-center mb-2">
                                <div>
                                    <p class="font-bold dark:text-white">${ref.username}</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Joined: ${ref.joinDate}</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-green-600 font-bold">+â‚¹${totalCommission}</p>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Total Commission</p>
                                </div>
                            </div>
                            ${userHistory.length > 0 ? `
                                <div class="mt-2 pt-2 border-t border-gray-300 dark:border-gray-500">
                                    <p class="text-sm font-bold text-primary dark:text-white">Commission History:</p>
                                    ${userHistory.map(comm => `
                                        <p class="text-xs text-gray-600 dark:text-gray-400">â‚¹${comm.amount} from ${comm.type} - ${comm.date}</p>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                    `;
                }).join('');
            } else {
                referralList.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No referrals yet. Share your code to start earning!</p>';
            }
        }

        function copyReferralCode() {
            const code = document.getElementById('referralCodeDisplay').textContent;
            navigator.clipboard.writeText(code);
            alert('Referral code copied! Share this code with your friends.');
        }

        // Check for referral parameter in URL
        function checkReferral() {
            const urlParams = new URLSearchParams(window.location.search);
            const refCode = urlParams.get('ref');
            if (refCode) {
                localStorage.setItem('referralCode', refCode);
            }
        }

        // Enhanced WhatsApp messages with detailed info
        function sendINRDepositToWhatsApp() {
            const amt = document.getElementById('depositAmountINR').value;
            if (!amt || amt < 100) return alert('Enter amount â‰¥ â‚¹100');
            
            const msg = `ðŸ’³ INR DEPOSIT REQUEST ðŸ’³
ðŸ‘¤ User: ${currentUser.username}
ðŸ“§ Email: ${currentUser.email}
ðŸ“± Phone: ${currentUser.phone}
ðŸ†” UID: ${currentUser.uid}
ðŸ’° Amount: â‚¹${amt}
ðŸ¦ Payment Method: UPI
ðŸ”— UPI ID: ${document.getElementById('currentUPI').textContent}
â° Timestamp: ${new Date().toLocaleString()}
ðŸ”— Platform: Alpha Area Trading`;

            window.open(`https://wa.me/message/Q4BLFPHK2VU7H1?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function sendUSDTDepositToWhatsApp() {
            const amt = document.getElementById('depositAmountUSDT').value;
            if (!amt || amt < 10) return alert('Enter amount â‰¥ 10 USDT');
            
            const msg = `ðŸ’³ USDT DEPOSIT REQUEST ðŸ’³
ðŸ‘¤ User: ${currentUser.username}
ðŸ“§ Email: ${currentUser.email}
ðŸ“± Phone: ${currentUser.phone}
ðŸ†” UID: ${currentUser.uid}
ðŸ’° Amount: ${amt} USDT
ðŸ¦ Payment Method: USDT
ðŸ”— BSC Address: 0x8e57d705f1b58ceda77c91df6ac80aac5c2a83df
ðŸ”— TRC Address: TN9DDuzXnXirgAAS4mRe8VFQ6VxuVUQmJc
â° Timestamp: ${new Date().toLocaleString()}
ðŸ”— Platform: Alpha Area Trading

Please send payment screenshot for confirmation.`;

            window.open(`https://wa.me/message/Q4BLFPHK2VU7H1?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function sendINRWithdrawToWhatsApp() {
            const amt = document.getElementById('withdrawAmountINR').value;
            if (!amt || amt < 100) return alert('Minimum â‚¹100');
            if (currentUser.balance < amt) return alert('Insufficient balance');
            
            const bankName = document.getElementById('bankName').value;
            const accHolderName = document.getElementById('accHolderName').value;
            const accNumber = document.getElementById('accNumber').value;
            const ifsc = document.getElementById('ifsc').value;
            
            if (!bankName || !accHolderName || !accNumber || !ifsc) return alert('Fill all bank details');
            
            const msg = `ðŸ¦ INR WITHDRAWAL REQUEST ðŸ¦
ðŸ‘¤ User: ${currentUser.username}
ðŸ“§ Email: ${currentUser.email}
ðŸ“± Phone: ${currentUser.phone}
ðŸ†” UID: ${currentUser.uid}
ðŸ’° Amount: â‚¹${amt}
ðŸ¦ Bank Name: ${bankName}
ðŸ‘¤ Account Holder: ${accHolderName}
ðŸ”¢ Account Number: ${accNumber}
ðŸ¦ IFSC Code: ${ifsc}
â° Timestamp: ${new Date().toLocaleString()}
ðŸ”— Platform: Alpha Area Trading`;

            window.open(`https://wa.me/message/Q4BLFPHK2VU7H1?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function sendUSDTWithdrawToWhatsApp() {
            const amt = document.getElementById('withdrawAmountUSDT').value;
            if (!amt || amt < 10) return alert('Minimum 10 USDT');
            if (currentUser.balance < amt) return alert('Insufficient balance');
            
            const usdtAddress = document.getElementById('usdtAddress').value;
            const usdtNetwork = document.getElementById('usdtNetwork').value;
            
            if (!usdtAddress) return alert('Enter USDT address');
            
            const msg = `ðŸ¦ USDT WITHDRAWAL REQUEST ðŸ¦
ðŸ‘¤ User: ${currentUser.username}
ðŸ“§ Email: ${currentUser.email}
ðŸ“± Phone: ${currentUser.phone}
ðŸ†” UID: ${currentUser.uid}
ðŸ’° Amount: ${amt} USDT
ðŸ¦ USDT Address: ${usdtAddress}
ðŸŒ Network: ${usdtNetwork.toUpperCase()}
â° Timestamp: ${new Date().toLocaleString()}
ðŸ”— Platform: Alpha Area Trading`;

            window.open(`https://wa.me/message/Q4BLFPHK2VU7H1?text=${encodeURIComponent(msg)}`, '_blank');
        }

        // Your existing functions remain exactly the same
        function showSignup() { document.getElementById('signupModal').classList.remove('hidden'); }
        function showLogin() { document.getElementById('loginModal').classList.remove('hidden'); }
        function closeModals() { document.getElementById('signupModal').classList.add('hidden'); document.getElementById('loginModal').classList.add('hidden'); }
        function showAdminLogin() { document.getElementById('adminLoginModal').classList.remove('hidden'); }
        function closeAdminModal() { document.getElementById('adminLoginModal').classList.add('hidden'); }

        function handleAdminLogin(e) {
            e.preventDefault();
            const email = document.getElementById('adminEmail').value.trim().toLowerCase();
            const pass = document.getElementById('adminPass').value;
            if (email === 'admin@example.com' && pass === 'admin123') {
                isAdmin = true;
                localStorage.setItem('adminLoggedIn', 'true');
                closeAdminModal();
                showSection('admin');
                updateTotalUsers();
                loadAdminUsers();
                alert('Admin login successful!');
            } else {
                alert('Invalid admin credentials');
            }
        }

        // Generate unique UID for each user
        function generateUID() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let uid = 'AAT';
            for (let i = 0; i < 7; i++) {
                uid += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return uid;
        }

        async function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim().toLowerCase();
            const phone = document.getElementById('signupPhone').value;
            const pass = document.getElementById('signupPass').value;
            const referralCodeInput = document.getElementById('signupReferralCode').value.trim().toUpperCase();

            if (users.find(u => u.email === email)) return alert('Email already exists!');

            // Check for referral from URL or input field
            let referredBy = null;
            const urlReferralCode = localStorage.getItem('referralCode');
            
            if (urlReferralCode) {
                referredBy = urlReferralCode;
                localStorage.removeItem('referralCode');
            } else if (referralCodeInput) {
                referredBy = referralCodeInput;
            }

            const user = { 
                name, 
                email, 
                phone, 
                pass, 
                username: email.split('@')[0], 
                uid: generateUID(),
                joinDate: new Date().toLocaleDateString('en-GB'), 
                balance: referredBy ? 5 : 0, // â‚¹5 bonus for referred users
                lastSeen: 'just now', 
                withdrawals: [],
                registeredAt: new Date().toISOString(),
                referredBy: referredBy,
                referralCode: null,
                referralEarnings: 0,
                totalReferrals: 0,
                totalDeposits: 0,
                totalWinnings: 0,
                totalWithdrawals: 0,
                commissionHistory: [],
                transactionHistory: [],
                investments: [],
                aiTrading: {}
            };
            users.push(user);
            
            // Add referral bonus to referrer
            if (referredBy) {
                const referrer = users.find(u => u.referralCode === referredBy);
                if (referrer) {
                    referrer.totalReferrals = (referrer.totalReferrals || 0) + 1;
                }
            }
            
            await saveUsersToCloud();
            localStorage.setItem('currentUser', JSON.stringify(user));
            loginSuccess(user);
        }

        // Auto commission on deposits
        function addReferralCommission(depositingUser, amount) {
            if (depositingUser.referredBy) {
                const referrer = users.find(u => u.referralCode === depositingUser.referredBy);
                if (referrer) {
                    const commission = amount * 0.02; // 2% commission
                    referrer.referralEarnings = (referrer.referralEarnings || 0) + commission;
                    referrer.balance += commission;
                    
                    // Add to commission history
                    if (!referrer.commissionHistory) referrer.commissionHistory = [];
                    referrer.commissionHistory.push({
                        amount: commission,
                        date: new Date().toLocaleString(),
                        from: depositingUser.username,
                        type: 'Deposit Commission'
                    });
                    
                    // Add transaction record
                    if (!referrer.transactionHistory) referrer.transactionHistory = [];
                    referrer.transactionHistory.unshift({
                        type: 'Referral Commission',
                        amount: commission,
                        date: new Date().toLocaleString(),
                        from: depositingUser.username
                    });
                    
                    saveUsersToCloud();
                    console.log(`â‚¹${commission} referral commission added to ${referrer.username}`);
                }
            }
        }

        // Admin: Manual Referral Commission
        function manualReferralCommission() {
            const email = document.getElementById('adminReferralUserEmail').value.trim().toLowerCase();
            const amountStr = document.getElementById('adminReferralAmount').value;
            const reason = document.getElementById('adminReferralReason').value.trim();
            const amount = parseFloat(amountStr);

            if (!email || isNaN(amount) || !reason) return alert('Enter email, amount, and reason');

            const user = users.find(u => u.email.toLowerCase() === email);
            if (!user) return alert('User not found!');

            const prevEarnings = user.referralEarnings || 0;
            user.referralEarnings = prevEarnings + amount;
            user.balance += amount;

            // Add to commission history
            if (!user.commissionHistory) user.commissionHistory = [];
            user.commissionHistory.push({
                amount: amount,
                date: new Date().toLocaleString(),
                from: 'Admin',
                type: reason
            });

            // Add transaction
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'Manual Referral Commission',
                amount: amount,
                date: new Date().toLocaleString(),
                from: reason
            });

            saveUsersToCloud();
            alert(`Manual commission applied: â‚¹${amount} to ${user.username}. New earnings: â‚¹${user.referralEarnings}`);
            document.getElementById('adminReferralUserEmail').value = '';
            document.getElementById('adminReferralAmount').value = '';
            document.getElementById('adminReferralReason').value = '';
        }

        // Admin function to update user stats
        async function updateUserStats() {
            const email = document.getElementById('adminUserEmailStats').value.trim().toLowerCase();
            const winnings = parseFloat(document.getElementById('adminUserWinnings').value) || 0;
            const withdrawals = parseFloat(document.getElementById('adminUserWithdrawals').value) || 0;

            if (!email) return alert('Enter user email');

            const user = users.find(u => u.email.toLowerCase() === email);
            if (!user) return alert('User not found!');

            user.totalWinnings = winnings;
            user.totalWithdrawals = withdrawals;

            // Add to transaction history if changed
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'Admin Stats Update',
                amount: 0,
                date: new Date().toLocaleString(),
                note: `Winnings: â‚¹${winnings}, Withdrawals: â‚¹${withdrawals}`
            });

            await saveUsersToCloud();
            alert(`Stats updated for ${user.username}\nWinnings: â‚¹${winnings}\nWithdrawals: â‚¹${withdrawals}`);
            
            // Clear fields
            document.getElementById('adminUserEmailStats').value = '';
            document.getElementById('adminUserWinnings').value = '';
            document.getElementById('adminUserWithdrawals').value = '';
        }

        // Admin function to update referral stats
        async function updateReferralStats() {
            const email = document.getElementById('adminUserEmailReferral').value.trim().toLowerCase();
            const referrals = parseInt(document.getElementById('adminUserReferrals').value) || 0;
            const referralEarnings = parseFloat(document.getElementById('adminUserReferralEarnings').value) || 0;

            if (!email) return alert('Enter user email');

            const user = users.find(u => u.email.toLowerCase() === email);
            if (!user) return alert('User not found!');

            user.totalReferrals = referrals;
            user.referralEarnings = referralEarnings;

            // Add to transaction history
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'Admin Referral Update',
                amount: 0,
                date: new Date().toLocaleString(),
                note: `Referrals: ${referrals}, Earnings: â‚¹${referralEarnings}`
            });

            await saveUsersToCloud();
            alert(`Referral stats updated for ${user.username}\nTotal Referrals: ${referrals}\nReferral Earnings: â‚¹${referralEarnings}`);
            
            // Clear fields
            document.getElementById('adminUserEmailReferral').value = '';
            document.getElementById('adminUserReferrals').value = '';
            document.getElementById('adminUserReferralEarnings').value = '';
        }

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value.trim().toLowerCase();
            const pass = document.getElementById('loginPass').value;

            const user = users.find(u => u.email === email && u.pass === pass);
            if (user) {
                user.lastSeen = 'just now';
                localStorage.setItem('currentUser', JSON.stringify(user));
                loginSuccess(user);
            } else {
                alert('Invalid email or password');
            }
        }

        function loginSuccess(user) {
            currentUser = user;
            closeModals();
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('dashUsername').textContent = user.username;
            document.getElementById('userUID').textContent = user.uid;
            updateBalance(); // Ensure balance updates on login/refresh
            updateLastSeen();
            loadActiveInvestments();
            
            // Load default chart
            if (document.getElementById('advanced-chart')) {
                loadChart('BTCUSDT');
            }
        }

        // Initialize cloud database
        async function initializeDatabase() {
            try {
                console.log('Loading data from cloud...');
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`, {
                    headers: {
                        'X-Master-Key': JSONBIN_API_KEY
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    users = data.record.users || [];
                    console.log('Cloud data loaded successfully:', users.length + ' users');
                } else {
                    console.log('Cloud load failed, using localStorage');
                    users = JSON.parse(localStorage.getItem('alphaAreaUsers') || '[]');
                }
            } catch (error) {
                console.log('Cloud database not available, using localStorage');
                users = JSON.parse(localStorage.getItem('alphaAreaUsers') || '[]');
            }
        }

        // Save users to cloud database
        async function saveUsersToCloud() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_API_KEY
                    },
                    body: JSON.stringify({ 
                        users: users
                    })
                });
                
                if (response.ok) {
                    console.log('Data saved to cloud successfully');
                    return true;
                } else {
                    throw new Error('Cloud save failed');
                }
            } catch (error) {
                console.log('Cloud save failed, using localStorage');
                localStorage.setItem('alphaAreaUsers', JSON.stringify(users));
                return false;
            }
        }

        function updateBalance() {
            if (currentUser) {
                document.getElementById('walletBalance').textContent = `â‚¹${currentUser.balance || 0}`;
                document.getElementById('profileBalance').textContent = currentUser.balance || 0;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                saveUsersToCloud();
            }
        }

        function updateLastSeen() {
            setInterval(() => {
                if (currentUser) document.getElementById('lastSeen').textContent = 'Last seen: just now';
            }, 30000);
        }

        function toggleMenu() { document.getElementById('menuDropdown').classList.toggle('hidden'); }

        function showSection(section) {
            document.querySelectorAll('#dashboard > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(section + 'Section').classList.remove('hidden');
            
            if (section === 'admin' && isAdmin) { 
                updateTotalUsers(); 
                loadAdminUsers(); 
            }
            if (section === 'profile') {
                loadProfileData();
            }
            if (section === 'history') {
                loadHistoryData();
            }
            if (section === 'referral') {
                loadReferralSection();
            }
            if (section === 'staking') {
                loadActiveInvestments();
            }
            if (section === 'aiBot') {
                loadAITradeHistory();
                // Load TradingView widget for AI Bot section
                if (document.getElementById('tradingview-widget')) {
                    new TradingView.widget({
                        "width": "100%",
                        "height": "400",
                        "symbol": "BINANCE:BTCUSDT",
                        "interval": "5",
                        "timezone": "Etc/UTC",
                        "theme": isDarkMode ? "dark" : "light",
                        "style": "1",
                        "locale": "in",
                        "toolbar_bg": "#f1f3f6",
                        "enable_publishing": false,
                        "allow_symbol_change": true,
                        "container_id": "tradingview-widget",
                        "studies": [
                            "RSI@tv-basicstudies",
                            "MACD@tv-basicstudies"
                        ]
                    });
                }
            }
            if (section === 'chartAnalysis') {
                // Load default chart if not already loaded
                if (document.getElementById('advanced-chart').innerHTML === '') {
                    loadChart('BTCUSDT');
                }
            }
            toggleMenu();
        }

        // Load Profile Data
        function loadProfileData() {
            if (currentUser) {
                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profileEmail').textContent = currentUser.email;
                document.getElementById('profilePhone').textContent = currentUser.phone;
                document.getElementById('profileUsername').textContent = currentUser.username;
                document.getElementById('profileUID').textContent = currentUser.uid;
                document.getElementById('profileJoinDate').textContent = currentUser.joinDate;
                document.getElementById('profileLastSeen').textContent = currentUser.lastSeen;
                document.getElementById('profileBalance').textContent = currentUser.balance || 0;
                document.getElementById('profileInvestments').textContent = currentUser.investments ? currentUser.investments.length : 0;
                document.getElementById('profileProfits').textContent = currentUser.totalWinnings || 0;
                document.getElementById('profileWithdrawals').textContent = currentUser.totalWithdrawals || 0;
                document.getElementById('profileAITrades').textContent = currentUser.aiTrading && currentUser.aiTrading.active ? 'Active' : 'None';
                document.getElementById('profileReferralEarnings').textContent = currentUser.referralEarnings || 0;
            }
        }

        function updateProfile() {
            alert('Profile update feature would be implemented in a real application');
        }

        // Load History Data
        function loadHistoryData() {
            const transactionHistory = document.getElementById('transactionHistory');
            const investmentHistory = document.getElementById('investmentHistory');
            const withdrawalHistory = document.getElementById('withdrawalHistory');
            
            if (currentUser) {
                // Transaction History
                if (currentUser.transactionHistory && currentUser.transactionHistory.length > 0) {
                    transactionHistory.innerHTML = currentUser.transactionHistory.slice(0, 10).map(transaction => 
                        `<div class="p-3 bg-white dark:bg-gray-600 rounded-lg border">
                            <p class="dark:text-white"><strong>${transaction.type}</strong> - â‚¹${transaction.amount || 0}</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">${transaction.date}</p>
                            ${transaction.note ? `<p class="text-xs text-gray-500">${transaction.note}</p>` : ''}
                        </div>`
                    ).join('');
                } else {
                    transactionHistory.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No transactions yet</p>';
                }

                // Investment History
                if (currentUser.investments && currentUser.investments.length > 0) {
                    investmentHistory.innerHTML = currentUser.investments.map(investment => {
                        const planNames = {
                            1: 'Basic Plan',
                            2: 'Silver Plan',
                            3: 'Gold Plan',
                            4: 'Platinum Plan',
                            5: 'VIP Plan'
                        };
                        
                        return `
                            <div class="p-3 bg-white dark:bg-gray-600 rounded-lg border">
                                <p class="dark:text-white"><strong>${planNames[investment.planId]}</strong> - â‚¹${investment.amount}</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">${investment.date}</p>
                                <p class="text-sm ${investment.active ? 'text-green-600' : 'text-gray-600'}">${investment.active ? 'Active' : 'Completed'}</p>
                                ${investment.totalReturns > 0 ? `<p class="text-sm text-green-600">Returns: â‚¹${investment.totalReturns.toFixed(2)}</p>` : ''}
                            </div>
                        `;
                    }).join('');
                } else {
                    investmentHistory.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No investments yet</p>';
                }

                // Withdrawal History
                if (currentUser.withdrawals && currentUser.withdrawals.length > 0) {
                    withdrawalHistory.innerHTML = currentUser.withdrawals.map(withdrawal => 
                        `<div class="p-3 bg-white dark:bg-gray-600 rounded-lg border">
                            <p class="dark:text-white"><strong>Withdrawal:</strong> â‚¹${withdrawal.amount}</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">${withdrawal.date} - ${withdrawal.status || 'Pending'}</p>
                        </div>`
                    ).join('');
                } else {
                    withdrawalHistory.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No withdrawals yet</p>';
                }
            }
        }

        // Daily Login Bonus
        function claimDailyBonus() {
            if (!currentUser) return;

            const today = new Date().toDateString();
            const lastBonusDate = localStorage.getItem(`lastBonus_${currentUser.email}`);

            if (lastBonusDate === today) {
                alert('You have already claimed your daily bonus today!');
                return;
            }

            const bonusAmount = Math.floor(Math.random() * 5) + 1; // â‚¹1 to â‚¹5
            currentUser.balance += bonusAmount;
            updateBalance();

            localStorage.setItem(`lastBonus_${currentUser.email}`, today);
            alert(`ðŸŽ‰ Daily bonus claimed! You received â‚¹${bonusAmount}`);
            saveUsersToCloud();
        }

        // Admin Panel Functions
        function updateTotalUsers() {
            document.getElementById('totalUsers').textContent = users.length;
        }

        function loadAdminUsers() {
            const container = document.getElementById('adminUserList');
            container.innerHTML = '';
            
            if (users.length === 0) {
                container.innerHTML = '<p class="text-center p-4 dark:text-white">No users registered yet</p>';
                return;
            }
            
            users.forEach(user => {
                const div = document.createElement('div');
                div.className = 'p-4 border rounded-xl bg-gray-50 dark:bg-gray-700';
                div.innerHTML = `
                    <p class="dark:text-white"><strong>${user.username}</strong> (${user.email})</p>
                    <p class="dark:text-gray-300">Phone: ${user.phone} | UID: ${user.uid}</p>
                    <p class="dark:text-gray-300">Balance: â‚¹${user.balance} | Joined: ${user.joinDate}</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Winnings: â‚¹${user.totalWinnings || 0} | Withdrawals: â‚¹${user.totalWithdrawals || 0}</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Referrals: ${user.totalReferrals || 0} | Ref Earnings: â‚¹${user.referralEarnings || 0}</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">AI Trading: ${user.aiTrading && user.aiTrading.active ? 'Active' : 'Inactive'}</p>
                    <div class="flex gap-2 mt-2">
                        <input type="number" placeholder="Amount" class="p-2 border rounded w-24 dark:bg-gray-600 dark:text-white" min="1">
                        <button onclick="addFund('${user.email}', this.previousElementSibling.value)" class="bg-green-500 text-white px-3 py-1 rounded text-sm">Add</button>
                        <button onclick="deductFund('${user.email}', this.parentElement.querySelector('input').value)" class="bg-red-500 text-white px-3 py-1 rounded text-sm">Deduct</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        async function addFundToUser() {
            const email = document.getElementById('adminUserEmail').value.trim().toLowerCase();
            const amount = parseFloat(document.getElementById('adminFundAmount').value);
            if (!email || !amount) return alert('Enter email and amount');
            await addFund(email, amount);
        }

        async function deductFundFromUser() {
            const email = document.getElementById('adminUserEmailDeduct').value.trim().toLowerCase();
            const amount = parseFloat(document.getElementById('adminDeductAmount').value);
            if (!email || !amount) return alert('Enter email and amount');
            await deductFund(email, amount);
        }

        async function addFund(email, amountStr) {
            const amt = parseFloat(amountStr);
            if (isNaN(amt) || amt <= 0) return alert('Enter valid amount');
            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase());
            if (!user) return alert('User not found! Check email spelling.');
            user.balance += amt;
            user.totalDeposits = (user.totalDeposits || 0) + amt;
            
            // Add referral commission if applicable
            addReferralCommission(user, amt);
            
            // Add transaction to user history
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'Bonus Received Successfully',
                amount: amt,
                date: new Date().toLocaleString()
            });
            
            await saveUsersToCloud();
            alert(`â‚¹${amt} added to ${user.username}. New balance: â‚¹${user.balance}`);
            loadAdminUsers();
            if (currentUser && currentUser.email.toLowerCase() === email.toLowerCase()) await updateBalance();
        }

        async function deductFund(email, amountStr) {
            const amt = parseFloat(amountStr);
            if (isNaN(amt) || amt <= 0) return alert('Enter valid amount');
            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase());
            if (!user) return alert('User not found! Check email spelling.');
            if (user.balance < amt) return alert(`Insufficient balance. User has only â‚¹${user.balance}`);
            user.balance -= amt;
            
            // Add transaction to user history
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'Admin Deducted Funds',
                amount: amt,
                date: new Date().toLocaleString()
            });
            
            await saveUsersToCloud();
            alert(`â‚¹${amt} deducted from ${user.username}. New balance: â‚¹${user.balance}`);
            loadAdminUsers();
            if (currentUser && currentUser.email.toLowerCase() === email.toLowerCase()) await updateBalance();
        }

        function logout() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('adminLoggedIn');
            isAdmin = false;
            location.reload();
        }

        // Initialize everything
        window.onload = async () => {
            await initializeDatabase();
            initializeLiveStats(); // Start live stats
            createParticles(); // New: Particles
            checkReferral(); // Check for referral codes
            
            // Load language preference
            currentLanguage = localStorage.getItem('language') || 'english';
            updateLanguage();

            const saved = localStorage.getItem('currentUser');
            if (saved) {
                const user = JSON.parse(saved);
                const found = users.find(u => u.email === user.email);
                if (found) {
                    loginSuccess(found);
                }
            }
            if (localStorage.getItem('adminLoggedIn') === 'true') isAdmin = true;

            // Event listeners
            document.getElementById('languageToggle').addEventListener('click', toggleLanguage);
        };

        document.addEventListener('click', (e) => {
            if (!e.target.closest('nav')) document.getElementById('menuDropdown').classList.add('hidden');
        });
    </script>
</body>
</html>
